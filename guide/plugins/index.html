<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Plugins - Villus</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content='<p align="center">'><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="villus-docs"><meta data-n-head="ssr" data-hid="author" name="author" content="Abdelrahman Awad"><meta data-n-head="ssr" data-hid="theme-color" name="theme-color" content="black"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="villus-docs"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="villus-docs"><meta data-n-head="ssr" data-hid="og:description" name="og:description" property="og:description" content='<p align="center">'><base href="/villus/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="manifest" href="/villus/_nuxt/manifest.d66aab22.json"><link data-n-head="ssr" rel="shortcut icon" href="/villus/_nuxt/icons/icon_64x64.5f6a36.png"><link data-n-head="ssr" rel="apple-touch-icon" href="/villus/_nuxt/icons/icon_512x512.5f6a36.png" sizes="512x512"><link rel="preload" href="/villus/_nuxt/d2fbd09.js" as="script"><link rel="preload" href="/villus/_nuxt/ab9449b.js" as="script"><link rel="preload" href="/villus/_nuxt/debd94b.js" as="script"><link rel="preload" href="/villus/_nuxt/def7368.js" as="script"><link rel="preload" href="/villus/_nuxt/c225518.js" as="script"><link rel="preload" href="/villus/_nuxt/8f17df1.js" as="script"><style data-vue-ssr-id="38dfa7e4:0 38dfa7e4:1 38dfa7e4:2 7e56e4e3:0 0b2d4420:0 3d4748cb:0 607e957a:0 55b015b6:0 34a4665a:0 10a809d0:0 7c6691d7:0 cdf44b34:0 dfa8d9a4:0">@import url(https://fonts.googleapis.com/css?family=Montserrat:700|Noto+Sans&display=swap);@import url(https://fonts.googleapis.com/css?family=Montserrat:700|Noto+Sans:400,700&display=swap);/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}body,html{width:100%;height:100%;font-family:Noto Sans,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;scroll-padding-top:130px}.space-y-1>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(.25rem*(1 - var(--space-y-reverse)));margin-bottom:calc(.25rem*var(--space-y-reverse))}.space-y-2>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(.5rem*(1 - var(--space-y-reverse)));margin-bottom:calc(.5rem*var(--space-y-reverse))}.space-y-8>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(2rem*(1 - var(--space-y-reverse)));margin-bottom:calc(2rem*var(--space-y-reverse))}.bg-black{--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity))}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-100{--bg-opacity:1;background-color:#f6f6f6;background-color:rgba(246,246,246,var(--bg-opacity))}.bg-dark{background-color:#161618}.bg-accent-100,.bg-accent-900{--bg-opacity:1;background-color:#a05e95;background-color:rgba(160,94,149,var(--bg-opacity))}.is-dark .dark-mode\:bg-black{--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity))}.is-dark .dark-mode\:bg-dark{background-color:#161618}.border-gray-200{border-color:#bdbdbd}.border-gray-700{--border-opacity:1;border-color:#e8e8e8;border-color:rgba(232,232,232,var(--border-opacity))}.border-gray-900{border-color:#4a4a4a}.border-accent-800{border-color:#a05e95;border-color:var(--accent,#a05e95)}.border-warning{border-color:#764637}.border-error{--border-opacity:1;border-color:#cf6679;border-color:rgba(207,102,121,var(--border-opacity))}.is-dark .dark-mode\:border-carbon{--border-opacity:1;border-color:#333;border-color:rgba(51,51,51,var(--border-opacity))}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-r-lg{border-top-right-radius:.5rem;border-bottom-right-radius:.5rem}.border{border-width:1px}.border-l-4{border-left-width:4px}.border-b{border-bottom-width:1px}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.grid{display:grid}.hidden{display:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.items-baseline{align-items:baseline}.justify-center{justify-content:center}.font-display{font-family:Montserrat,sans-serif}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-full{height:100%}.h-screen{height:100vh}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.text-xl{font-size:calc(1em + .4vw)}.text-4xl{font-size:2.25rem}.list-decimal{list-style-type:decimal}.my-4{margin-top:1rem;margin-bottom:1rem}.my-8{margin-top:2rem;margin-bottom:2rem}.my-10{margin-top:2.5rem;margin-bottom:2.5rem}.ml-1{margin-left:.25rem}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.ml-4{margin-left:1rem}.mt-8{margin-top:2rem}.mt-16{margin-top:4rem}.mb-16{margin-bottom:4rem}.mr-auto{margin-right:auto}.ml-auto{margin-left:auto}.opacity-50{opacity:.5}.hover\:opacity-100:hover{opacity:1}.outline-none{outline:0}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.p-4{padding:1rem}.p-6{padding:1.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-12{padding-top:3rem;padding-bottom:3rem}.pl-4{padding-left:1rem}.pt-24{padding-top:6rem}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:-webkit-sticky;position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.fill-current{fill:currentColor}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#a2a2a2;color:rgba(162,162,162,var(--text-opacity))}.text-dark{color:#161618}.text-accent-900{--text-opacity:1;color:#a05e95;color:rgba(160,94,149,var(--text-opacity))}.text-accent-800{color:#a05e95;color:var(--accent,#a05e95)}.text-warning{color:#764637}.text-error{--text-opacity:1;color:#cf6679;color:rgba(207,102,121,var(--text-opacity))}.is-dark .dark-mode\:text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.italic{font-style:italic}.uppercase{text-transform:uppercase}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.w-screen{width:100vw}.z-20{z-index:20}.z-30{z-index:30}.gap-x-4{-moz-column-gap:1rem;grid-column-gap:1rem;column-gap:1rem}.gap-y-8{grid-row-gap:2rem;row-gap:2rem}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}.transition-opacity{transition-property:opacity}.duration-200{transition-duration:.2s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:768px){.md\:text-xl{font-size:calc(1em + .4vw)}.md\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (min-width:1024px){.lg\:block{display:block}.lg\:flex{display:flex}.lg\:hidden{display:none}.lg\:px-10{padding-left:2.5rem;padding-right:2.5rem}}@media (min-width:1280px){.xl\:block{display:block}}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.AppWrapper[data-v-e9769f5a]{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity));color:#161618;width:100%;height:100%;min-height:100vh}.is-dark .AppWrapper[data-v-e9769f5a]{background-color:#161618;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.App[data-v-e9769f5a]{height:100%;margin-left:auto;margin-right:auto;max-width:1500px;grid-template-areas:"content" "footer";display:grid;grid-gap:20px}@media (min-width:1024px){.App[data-v-e9769f5a]{grid-template-areas:"lside content rside" "footer footer footer";grid-template-columns:1.5fr 45rem .5fr;-moz-column-gap:70px;grid-column-gap:70px;column-gap:70px}}@media (min-width:1280px){.App[data-v-e9769f5a]{grid-template-areas:"lside content rside" "footer footer footer";grid-template-columns:1fr 45rem 1fr}}.lside[data-v-e9769f5a]{margin-left:auto;grid-area:lside}.main[data-v-e9769f5a]{padding:3rem 1.5rem;min-width:0}@media (min-width:1024px){.main[data-v-e9769f5a]{padding-left:0;padding-right:0}}.fade-enter-active[data-v-e9769f5a],.fade-leave-active[data-v-e9769f5a]{transition:opacity .8s ease-in-out,transform .2s ease-in-out}.fade-enter[data-v-e9769f5a],.fade-leave-to[data-v-e9769f5a]{opacity:0;transform:translate3d(40%,0,0)}.header__content[data-v-895612fa]{max-width:1300px;margin-left:auto;margin-right:auto}.burger[data-v-70688733]{height:3em;width:3em;font-size:12px;cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent}.burger[data-v-70688733]:focus{outline:0}.burger[data-v-70688733]:after{content:"";display:block;position:absolute;height:150%;width:150%;top:-25%;left:-25%}.burger .burger-lines[data-v-70688733]{top:50%;margin-top:-.125em}.burger .burger-lines[data-v-70688733],.burger .burger-lines[data-v-70688733]:after,.burger .burger-lines[data-v-70688733]:before{pointer-events:none;display:block;content:"";width:100%;border-radius:.25em;background-color:#000;height:.25em;position:absolute;transform:rotate(0)}.is-dark .burger .burger-lines[data-v-70688733],.is-dark .burger .burger-lines[data-v-70688733]:after,.is-dark .burger .burger-lines[data-v-70688733]:before{background-color:#fff}.burger .burger-lines[data-v-70688733]:after{left:0;top:-1em}.burger .burger-lines[data-v-70688733]:before{left:1em;top:1em}.burger.burger-squeeze .burger-lines[data-v-70688733]:after,.burger.burger-squeeze .burger-lines[data-v-70688733]:before{width:2em}@media (prefers-reduced-motion:no-preference){.burger.burger-squeeze .burger-lines[data-v-70688733],.burger.burger-squeeze .burger-lines[data-v-70688733]:after,.burger.burger-squeeze .burger-lines[data-v-70688733]:before{transition:top .2s .2s,left .1s,transform .2s,background-color .4s .2s}.burger.burger-squeeze.open .burger-lines[data-v-70688733],.burger.burger-squeeze.open .burger-lines[data-v-70688733]:after,.burger.burger-squeeze.open .burger-lines[data-v-70688733]:before{transition:background-color .2s,top .2s,left .2s,transform .2s .15s}}.burger.burger-squeeze.open .burger-lines[data-v-70688733]{background-color:transparent}.burger.burger-squeeze.open .burger-lines[data-v-70688733]:after,.burger.burger-squeeze.open .burger-lines[data-v-70688733]:before{left:.5em;top:0}.burger.burger-squeeze.open .burger-lines[data-v-70688733]:before{transform:rotate(-45deg)}.burger.burger-squeeze.open .burger-lines[data-v-70688733]:after{transform:rotate(45deg)}.SideMenu[data-v-f2960fd2]{position:fixed;height:100vh;width:100vw;top:0;right:0;bottom:0;left:0;z-index:20;overflow-y:auto;--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity));color:#161618;display:flex;flex-direction:column}.is-dark .SideMenu[data-v-f2960fd2]{background-color:#161618;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}@media (prefers-reduced-motion:no-preference){.slide-enter-active[data-v-f2960fd2],.slide-leave-active[data-v-f2960fd2]{transition:transform .25s ease-in-out,opacity .25s ease-in-out}.slide-enter[data-v-f2960fd2],.slide-leave-to[data-v-f2960fd2]{opacity:0;transform:translate3d(100%,0,0)}}nav a[data-v-f2960fd2]{transition:color .3s ease-in-out}nav a[data-v-f2960fd2]::-moz-focus-inner{border:0}nav a[data-v-f2960fd2]:focus,nav a[data-v-f2960fd2]:hover{color:#a05e95;color:var(--accent,#a05e95)}nav a[data-v-f2960fd2]:focus{outline:2px dotted currentColor;outline-offset:2px}nav a[data-v-f2960fd2]:after{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;border:6px solid transparent;content:""}nav a.active[data-v-f2960fd2]:after,nav a[data-v-f2960fd2]:after{transition:border-color .3s ease-in-out}nav a.active[data-v-f2960fd2]:after{border-color:#a05e95;border-color:var(--accent,#a05e95)}.FeedLink[data-v-f2960fd2]{min-width:48px;min-height:48px}button[data-v-725f6df3]{outline:0;align-items:center;justify-content:center;position:relative;min-width:24px;min-height:24px}svg[data-v-725f6df3]{position:absolute}@media (prefers-reduced-motion:no-preference){.popup-enter-active[data-v-725f6df3],.popup-leave-active[data-v-725f6df3]{transition:transform .5s ease-in-out,opacity .3s ease-in-out}.popup-enter[data-v-725f6df3],.popup-leave-to[data-v-725f6df3]{transform:translate3d(0,-50px,0);opacity:0}}[data-v-52fb82fa] h1{font-size:2.25rem;margin-bottom:2rem}[data-v-52fb82fa] h2{font-size:calc(1em + .75vw)}[data-v-52fb82fa] h3{font-size:calc(1em + .4vw)}[data-v-52fb82fa] h4{font-size:1.125rem}[data-v-52fb82fa] h1,[data-v-52fb82fa] h2,[data-v-52fb82fa] h3{font-family:Montserrat,sans-serif}[data-v-52fb82fa] h2,[data-v-52fb82fa] h3,[data-v-52fb82fa] h4{font-weight:600;margin-top:2rem;margin-bottom:2rem;position:relative;transform:translateX(2ch)}[data-v-52fb82fa] h2:before,[data-v-52fb82fa] h3:before,[data-v-52fb82fa] h4:before{position:absolute;color:#a05e95;color:var(--accent,#a05e95);margin-left:-2ch;content:"#"}@media (min-width:1024px){[data-v-52fb82fa] h2,[data-v-52fb82fa] h3,[data-v-52fb82fa] h4{transform:none}}[data-v-52fb82fa] p+p,[data-v-52fb82fa] ul{margin-top:1rem}[data-v-52fb82fa] ul{padding-left:2rem;padding-right:2rem;margin-bottom:1rem;list-style-type:disc}[data-v-52fb82fa] ul li+li{margin-top:.5rem}[data-v-52fb82fa] .features ul li{position:relative;display:flex;align-items:center}[data-v-52fb82fa] .features ul li:before{width:1.25rem;height:1.25rem;position:absolute;border-radius:9999px;display:flex;--text-opacity:1;color:#a05e95;color:rgba(160,94,149,var(--text-opacity));--bg-opacity:1;background-color:#a05e95;background-color:rgba(160,94,149,var(--bg-opacity));align-items:center;justify-content:center;content:"âœ“";left:-2rem}[data-v-52fb82fa] .nuxt-content-highlight{margin-top:1rem;margin-bottom:1rem;font-size:.875rem}[data-v-52fb82fa] blockquote{padding-top:.5rem;padding-bottom:.5rem;border-top-right-radius:.5rem;border-bottom-right-radius:.5rem;padding-left:1rem;--bg-opacity:1;background-color:#f6f6f6;background-color:rgba(246,246,246,var(--bg-opacity));font-size:.875rem;border-left-width:4px;border-color:#a05e95;border-color:var(--accent,#a05e95);font-style:italic;margin-top:2rem;margin-bottom:2rem}[data-v-52fb82fa] pre[class*=language-]{border-radius:.5rem;margin-top:1rem;margin-bottom:1rem;display:block;border-width:1px;--border-opacity:1;border-color:#f6f6f6;border-color:rgba(246,246,246,var(--border-opacity))}[data-v-52fb82fa] :not(pre)>code:not([class]){font-size:.875rem;padding-left:.25rem;padding-right:.25rem;border-radius:.25rem;--bg-opacity:1;background-color:#f6f6f6;background-color:rgba(246,246,246,var(--bg-opacity));border-width:1px;border-color:#bdbdbd;color:#4a4a4a}[data-v-52fb82fa] details{margin-top:2.5rem;margin-bottom:2.5rem;padding-left:.75rem;padding-right:.75rem}[data-v-52fb82fa] details summary{outline:0;margin-bottom:2rem}[data-v-52fb82fa] ol{list-style-type:decimal;padding-left:2rem;padding-right:2rem}[data-v-52fb82fa] li a[href],[data-v-52fb82fa] p a[href],[data-v-52fb82fa] td a[href]{color:#a05e95;color:var(--accent,#a05e95)}[data-v-52fb82fa] li a[href]:hover,[data-v-52fb82fa] p a[href]:hover,[data-v-52fb82fa] td a[href]:hover{text-decoration:underline}[data-v-52fb82fa] code .token.deleted{color:#ec5975}[data-v-52fb82fa] code .token.inserted{color:#0a7a34}[data-v-52fb82fa] pre,[data-v-52fb82fa] pre[class*=language-]{line-height:1.4;padding:1.25rem 1.5rem;margin:.85rem 0;background-color:#f6f6f6;border-radius:6px;overflow:auto;position:relative}[data-v-52fb82fa] pre code,[data-v-52fb82fa] pre[class*=language-] code{color:#3a385d;padding:0;background-color:transparent;border-radius:0}[data-v-52fb82fa] div[class*=language-]{position:relative;background-color:#f6f6f6;border-radius:6px}[data-v-52fb82fa] div[class*=language-] .highlight-lines{background-color:#f6f6f6;color:#3a385d;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-top:1.3rem;position:absolute;top:0;left:0;width:100%;line-height:1.4}[data-v-52fb82fa] div[class*=language-] .highlight-lines .highlighted{background-color:#f8ec06}[data-v-52fb82fa] div[class*=language-] pre,[data-v-52fb82fa] div[class*=language-] pre[class*=language-]{background:0 0;position:relative;z-index:1}[data-v-52fb82fa] [class*=language-]:before{position:absolute;z-index:3;top:.8em;right:1em;font-size:.75rem;color:#00000c}[data-v-52fb82fa] div[class*=language-]:not(.line-numbers-mode) .line-numbers-wrapper{display:none}[data-v-52fb82fa] div[class*=language-].line-numbers-mode .highlight-lines .highlighted{position:relative}[data-v-52fb82fa] div[class*=language-].line-numbers-mode .highlight-lines .highlighted:before{content:" ";position:absolute;z-index:3;left:0;top:0;display:block;width:1rem;height:100%;background-color:hsla(0,0%,100%,.95)}[data-v-52fb82fa] div[class*=language-].line-numbers-mode pre{padding-left:1rem;vertical-align:middle}[data-v-52fb82fa] div[class*=language-].line-numbers-mode .line-numbers-wrapper{position:absolute;top:0;width:1rem;text-align:center;color:hsla(0,0%,100%,.3);padding:1.25rem 0;line-height:1.4}[data-v-52fb82fa] div[class*=language-].line-numbers-mode .line-numbers-wrapper .line-number,[data-v-52fb82fa] div[class*=language-].line-numbers-mode .line-numbers-wrapper br{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[data-v-52fb82fa] div[class*=language-].line-numbers-mode .line-numbers-wrapper .line-number{position:relative;z-index:4;font-size:.85em}[data-v-52fb82fa] div[class*=language-].line-numbers-mode:after{content:"";position:absolute;z-index:2;top:0;left:0;width:1rem;height:100%;border-radius:6px 0 0 6px;border-right:1px solid rgba(0,0,0,.66)}[data-v-52fb82fa] .language-html:before{content:"html"}[data-v-52fb82fa] .language-js:before{content:"js"}[data-v-52fb82fa] .language-ts:before{content:"ts"}[data-v-52fb82fa] div[class~=language-javascript]:before{content:"js"}[data-v-52fb82fa] div[class~=language-typescript]:before{content:"ts"}[data-v-52fb82fa] div[class~=language-markup]:before{content:"html"}[data-v-52fb82fa] div[class~=language-json]:before{content:"json"}[data-v-52fb82fa] div.reactivecontent{width:1000px;margin-left:-100px}[data-v-52fb82fa] .token.punctuation{color:#a8a9cc}[data-v-52fb82fa] .token.attr-name,[data-v-52fb82fa] .token.deleted,[data-v-52fb82fa] .token.namespace,[data-v-52fb82fa] .token.tag{color:#b2085f}[data-v-52fb82fa] .token.attr-value,[data-v-52fb82fa] .token.char,[data-v-52fb82fa] .token.regex,[data-v-52fb82fa] .token.string,[data-v-52fb82fa] .token.variable{color:#0a7a34}[data-v-52fb82fa] .token.atrule,[data-v-52fb82fa] .token.builtin,[data-v-52fb82fa] .token.important,[data-v-52fb82fa] .token.keyword,[data-v-52fb82fa] .token.selector{color:#b92dbc}[data-v-52fb82fa] .token.boolean,[data-v-52fb82fa] .token.function,[data-v-52fb82fa] .token.number{color:#c25205}[data-v-52fb82fa] .token.class-name,[data-v-52fb82fa] .token.constant,[data-v-52fb82fa] .token.property,[data-v-52fb82fa] .token.symbol{color:#717c11}[data-v-52fb82fa] .token.entity,[data-v-52fb82fa] .token.operator,[data-v-52fb82fa] .token.url{color:#0b7e7d}[data-v-52fb82fa] .token.block-comment,[data-v-52fb82fa] .token.cdata,[data-v-52fb82fa] .token.comment,[data-v-52fb82fa] .token.doctype,[data-v-52fb82fa] .token.prolog{color:#848486}[data-v-52fb82fa] table{width:100%;margin-top:1rem;margin-bottom:1rem}[data-v-52fb82fa] table,[data-v-52fb82fa] td,[data-v-52fb82fa] th{border-width:1px;border-color:#bdbdbd}[data-v-52fb82fa] td,[data-v-52fb82fa] th{padding:.75rem}.is-dark [data-v-52fb82fa] :not(pre)>code:not([class]){padding-left:.25rem;padding-right:.25rem;--bg-opacity:1;background-color:#000;background-color:rgba(0,0,0,var(--bg-opacity));border-width:1px;border-color:#4a4a4a;color:#bdbdbd}.is-dark [data-v-52fb82fa] blockquote{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.is-dark [data-v-52fb82fa] code[class*=language-],.is-dark [data-v-52fb82fa] pre[class*=language-]{background-color:#070707;text-shadow:none;color:#d6deeb;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}.is-dark [data-v-52fb82fa] code[class*=language-] ::-moz-selection,.is-dark [data-v-52fb82fa] code[class*=language-]::-moz-selection,.is-dark [data-v-52fb82fa] pre[class*=language-] ::-moz-selection,.is-dark [data-v-52fb82fa] pre[class*=language-]::-moz-selection{text-shadow:none;background:rgba(29,59,83,.99)}.is-dark [data-v-52fb82fa] code[class*=language-] ::selection,.is-dark [data-v-52fb82fa] code[class*=language-]::selection,.is-dark [data-v-52fb82fa] pre[class*=language-] ::selection,.is-dark [data-v-52fb82fa] pre[class*=language-]::selection{text-shadow:none;background:rgba(29,59,83,.99)}@media print{.is-dark [data-v-52fb82fa] code[class*=language-],.is-dark [data-v-52fb82fa] pre[class*=language-]{text-shadow:none}}.is-dark [data-v-52fb82fa] pre{padding:1em;margin:.5em 0;overflow:auto}.is-dark [data-v-52fb82fa] :not(pre)>code,.is-dark [data-v-52fb82fa] pre{color:#fff;background:#011627}.is-dark [data-v-52fb82fa] :not(pre)>code{padding:.1em;border-radius:.3em;white-space:normal}.is-dark [data-v-52fb82fa] .token.cdata,.is-dark [data-v-52fb82fa] .token.comment,.is-dark [data-v-52fb82fa] .token.prolog{color:#637777;font-style:italic}.is-dark [data-v-52fb82fa] .token.punctuation{color:#c792ea}.is-dark [data-v-52fb82fa] .namespace{color:#b2ccd6}.is-dark [data-v-52fb82fa] .token.deleted{color:rgba(239,83,80,.56);font-style:italic}.is-dark [data-v-52fb82fa] .token.property,.is-dark [data-v-52fb82fa] .token.symbol{color:#80cbc4}.is-dark [data-v-52fb82fa] .token.keyword,.is-dark [data-v-52fb82fa] .token.operator,.is-dark [data-v-52fb82fa] .token.tag{color:#7fdbca;background:0 0}.is-dark [data-v-52fb82fa] .token.boolean{color:#ff5874}.is-dark [data-v-52fb82fa] .token.number{color:#f78c6c}.is-dark [data-v-52fb82fa] .token.builtin,.is-dark [data-v-52fb82fa] .token.char,.is-dark [data-v-52fb82fa] .token.constant,.is-dark [data-v-52fb82fa] .token.function{color:#82aaff}.is-dark [data-v-52fb82fa] .token.doctype,.is-dark [data-v-52fb82fa] .token.selector{color:#c792ea;font-style:italic}.is-dark [data-v-52fb82fa] .token.attr-name,.is-dark [data-v-52fb82fa] .token.inserted{color:#addb67;font-style:italic}.is-dark [data-v-52fb82fa] .language-css .token.string,.is-dark [data-v-52fb82fa] .style .token.string,.is-dark [data-v-52fb82fa] .token.entity,.is-dark [data-v-52fb82fa] .token.string,.is-dark [data-v-52fb82fa] .token.url{color:#addb67}.is-dark [data-v-52fb82fa] .token.atrule,.is-dark [data-v-52fb82fa] .token.attr-value,.is-dark [data-v-52fb82fa] .token.class-name{color:#ffcb8b}.is-dark [data-v-52fb82fa] .token.important,.is-dark [data-v-52fb82fa] .token.regex,.is-dark [data-v-52fb82fa] .token.variable{color:#d6deeb}.is-dark [data-v-52fb82fa] .token.bold,.is-dark [data-v-52fb82fa] .token.important{font-weight:700}.is-dark [data-v-52fb82fa] .token.italic{font-style:italic}.is-dark [data-v-52fb82fa] pre code,.is-dark [data-v-52fb82fa] pre[class*=language-] code{color:#d6deeb}.is-dark [data-v-52fb82fa] [class*=language-]:before{--text-opacity:1;color:#333;color:rgba(51,51,51,var(--text-opacity))}.is-dark [data-v-52fb82fa] pre[class*=language-],.is-dark [data-v-52fb82fa] table,.is-dark [data-v-52fb82fa] td,.is-dark [data-v-52fb82fa] th{--border-opacity:1;border-color:#333;border-color:rgba(51,51,51,var(--border-opacity))}.is-dark [data-v-52fb82fa] table,.is-dark [data-v-52fb82fa] td,.is-dark [data-v-52fb82fa] th{border-width:1px}@media (prefers-reduced-motion:no-preference){nav a[data-v-ee0b0be6]{transition:color .2s ease-in-out}}nav a.nuxt-link-active[data-v-ee0b0be6],nav a[data-v-ee0b0be6]:hover{color:#a05e95;color:var(--accent,#a05e95)}@media (prefers-reduced-motion:no-preference){nav a[data-v-ee25ff46]{transition:transform .3s ease-in-out,color .2s ease-in-out}}nav a[data-v-ee25ff46]:hover{color:#a05e95;color:var(--accent,#a05e95)}@media (prefers-reduced-motion:no-preference){nav a[data-v-ee25ff46]:hover{transform:translate3d(10px,0,0)}}</style>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="AppWrapper" data-v-e9769f5a><header class="py-4 sticky top-0 dark-mode:bg-dark bg-white z-20 border-b dark-mode:border-carbon border-gray-700" data-v-895612fa data-v-e9769f5a><div class="flex items-center header__content px-6 lg:px-10" data-v-895612fa><div class="mr-auto flex items-baseline" data-v-895612fa><a href="/villus/" class="ml-1 text-accent font-bold nuxt-link-active" data-v-895612fa>Villus</a></div> <button class="burger burger-squeeze ml-auto block lg:hidden relative z-30" data-v-70688733 data-v-895612fa><div class="burger-lines" data-v-70688733></div></button> <!----> <a href="https://github.com/logaretm/villus" target="_blank" rel="noopener" class="ml-4 transition-opacity opacity-50 dark-mode:text-white hover:opacity-100 text-dark duration-200 hidden lg:block" data-v-895612fa><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current w-5 h-5" data-v-895612fa><title data-v-895612fa>GitHub</title> <path d="M10 0a10 10 0 0 0-3.16 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.1.39-1.99 1.03-2.69a3.6 3.6 0 0 1 .1-2.64s.84-.27 2.75 1.02a9.58 9.58 0 0 1 5 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69 0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0 0 10 0" data-v-895612fa></path></svg></a> <button class="opacity-50 transition-opacity duration-200 hover:opacity-100 ml-4 hidden lg:flex" data-v-725f6df3 data-v-895612fa><!----> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24" class="fill-current text-dark" data-v-725f6df3 data-v-725f6df3><title data-v-725f6df3>Light Mode</title> <path d="M0 0h24v24H0z" fill="none" data-v-725f6df3></path> <path d="M12,19a1,1,0,0,1,1,1v1a1,1,0,0,1-2,0V20A1,1,0,0,1,12,19ZM13,4V3a1,1,0,0,0-2,0V4a1,1,0,0,0,2,0ZM3,11a1,1,0,0,0,0,2H4a1,1,0,0,0,0-2Zm18,0H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2ZM4.93,17.65a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l.7-.7A1,1,0,0,0,5.63,17ZM19.07,4.93a1,1,0,0,0-1.42,0l-.7.7a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l.7-.7A1,1,0,0,0,19.07,4.93Zm-14.14,0a1,1,0,0,0,0,1.42l.7.7a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42l-.7-.7A1,1,0,0,0,4.93,4.93ZM18.37,17A1,1,0,0,0,17,18.37l.7.7a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM12,6a6,6,0,1,1-6,6A6,6,0,0,1,12,6ZM8,12a4,4,0,1,0,4-4A4,4,0,0,0,8,12Z" data-v-725f6df3></path></svg></button></div></header> <div class="App" data-v-e9769f5a><main class="main" data-v-e9769f5a><div class="nuxt-content" data-v-52fb82fa data-v-52fb82fa data-v-e9769f5a><h1 id="plugins" data-v-52fb82fa data-v-52fb82fa><a href="#plugins" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>Plugins</h1>
<p data-v-52fb82fa data-v-52fb82fa>villus is very flexible and versatile, and as such you will need to write quite a few plugins of your own for various purposes, wehter to add special headers, transform the body to a specific format or encoding, or even change the <code data-v-52fb82fa data-v-52fb82fa>fetch</code> function used.</p>
<p data-v-52fb82fa data-v-52fb82fa>Something you might not be aware of is that villus is pre-configured with a couple of plugins that are necessary to execute queries, the default plugins are:</p>
<ul data-v-52fb82fa data-v-52fb82fa>
<li data-v-52fb82fa data-v-52fb82fa><a href="/villus/plugins/fetch" data-v-52fb82fa><code data-v-52fb82fa>fetch</code></a>: used to execute queries on the network (actual fetching)</li>
<li data-v-52fb82fa data-v-52fb82fa><a href="/villus/plugins/cache" data-v-52fb82fa><code data-v-52fb82fa>cache</code></a>: an in-memory simple cache that comes with villus by default, supports all cache policies</li>
</ul>
<p data-v-52fb82fa data-v-52fb82fa>Furthermore, villus exposes the default plugins as <code data-v-52fb82fa data-v-52fb82fa>defaultPlugins</code> function. To add plugins to villus client you need to pass a <code data-v-52fb82fa data-v-52fb82fa>use</code> array containing the plugins you would like to have</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token comment" data-v-52fb82fa data-v-52fb82fa>// later in your setup</span>
<span class="token keyword module" data-v-52fb82fa data-v-52fb82fa>import</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> useClient<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> defaultPlugins <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span> <span class="token keyword module" data-v-52fb82fa data-v-52fb82fa>from</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'villus'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

<span class="token function" data-v-52fb82fa data-v-52fb82fa>useClient</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  url<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'/graphql'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span>
  use<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>[</span><span class="token spread operator" data-v-52fb82fa data-v-52fb82fa>...</span><span class="token method function property-access" data-v-52fb82fa data-v-52fb82fa>defaultPlugins</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>]</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// if not provided `defaultPlugins` will be used</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
</code></pre></div>
<p data-v-52fb82fa data-v-52fb82fa>In addition to the default plugins, villus also offers the following plugins but they are not enabled by default:</p>
<ul data-v-52fb82fa data-v-52fb82fa>
<li data-v-52fb82fa data-v-52fb82fa><a href="/villus/plugins/batch" data-v-52fb82fa><code data-v-52fb82fa>batch</code></a>: used instead of <code data-v-52fb82fa data-v-52fb82fa>fetch</code> to execute queries in batches on the network</li>
<li data-v-52fb82fa data-v-52fb82fa><a href="/villus/plugins/multipart" data-v-52fb82fa><code data-v-52fb82fa>multipart</code></a>: Adds File upload support</li>
<li data-v-52fb82fa data-v-52fb82fa><a href="/villus/plugins/handle-subscriptions" data-v-52fb82fa><code data-v-52fb82fa>handleSubscriptions</code></a>: Adds GraphQL subscriptions support</li>
</ul>
<h2 id="plugins-under-the-hood" data-v-52fb82fa data-v-52fb82fa><a href="#plugins-under-the-hood" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>Plugins under the hood</h2>
<p data-v-52fb82fa data-v-52fb82fa>Under the hood, plugins are simple callbacks that run through various life-cycles of the operation execution, the main features of villus plugins compared to other libraries are:</p>
<ul data-v-52fb82fa data-v-52fb82fa>
<li data-v-52fb82fa data-v-52fb82fa>All plugins can be synchronous or asynchronous</li>
<li data-v-52fb82fa data-v-52fb82fa>They will be executed at the same order they are defined in</li>
<li data-v-52fb82fa data-v-52fb82fa>Each plugin can set anything about the current operation fetch options, like <code data-v-52fb82fa data-v-52fb82fa>url</code> or <code data-v-52fb82fa data-v-52fb82fa>body</code> or <code data-v-52fb82fa data-v-52fb82fa>headers</code> (ex: adding auth token to headers)</li>
<li data-v-52fb82fa data-v-52fb82fa>Each plugin can choose to set the operation result at any time without stopping other plugins (ex: cache plugins)</li>
<li data-v-52fb82fa data-v-52fb82fa>Each plugin can choose to end the operation with a specific result while skipping other plugins by setting the terminate signal (ex: fetch and batch plugins)</li>
<li data-v-52fb82fa data-v-52fb82fa>Each plugin can execute a callback that's synchronous or asynchronous after the query is executed (ex: cache plugin)</li>
</ul>
<p data-v-52fb82fa data-v-52fb82fa>A villus plugin has a type called <code data-v-52fb82fa data-v-52fb82fa>ClientPlugin</code> and it looks like this in TypeScript:</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-typescript" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>type</span> <span class="token class-name" data-v-52fb82fa data-v-52fb82fa>OperationType</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'query'</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>|</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'mutation'</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>|</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'subscription'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

<span class="token keyword" data-v-52fb82fa data-v-52fb82fa>type</span> <span class="token class-name" data-v-52fb82fa data-v-52fb82fa>AfterQueryCallback</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>result<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> OperationResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=></span> <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>void</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>|</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>Promise</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>&lt;</span><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>void</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

<span class="token keyword" data-v-52fb82fa data-v-52fb82fa>interface</span> <span class="token class-name" data-v-52fb82fa data-v-52fb82fa>FetchOptions</span> <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>extends</span> <span class="token class-name" data-v-52fb82fa data-v-52fb82fa>RequestInit</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  url<span class="token operator" data-v-52fb82fa data-v-52fb82fa>?</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>string</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>

<span class="token keyword" data-v-52fb82fa data-v-52fb82fa>interface</span> <span class="token class-name" data-v-52fb82fa data-v-52fb82fa>ClientPluginContext</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  <span class="token function-variable function" data-v-52fb82fa data-v-52fb82fa>useResult</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>result<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> OperationResult<span class="token operator" data-v-52fb82fa data-v-52fb82fa>&lt;</span><span class="token builtin" data-v-52fb82fa data-v-52fb82fa>unknown</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> terminate<span class="token operator" data-v-52fb82fa data-v-52fb82fa>?</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>boolean</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=></span> <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>void</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// used to signal that the plugin found a result for the operation</span>
  <span class="token function-variable function" data-v-52fb82fa data-v-52fb82fa>afterQuery</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>cb<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> AfterQueryCallback<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=></span> <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>void</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Registers a callback to do something after the query is finished and the pipeline is done</span>
  operation<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
    query<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> DocumentNode <span class="token operator" data-v-52fb82fa data-v-52fb82fa>|</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>string</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// The query/mutation to be executed</span>
    variables<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> Record<span class="token operator" data-v-52fb82fa data-v-52fb82fa>&lt;</span><span class="token builtin" data-v-52fb82fa data-v-52fb82fa>string</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>any</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// The query variables</span>
    cachePolicy<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> CachePolicy<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// The cache policy for this operation</span>
    key<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>number</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// a unique key to identify this operation (useful for cache)</span>
    <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>type</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> OperationType<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// the operation type: `query` or `mutation` or `subscription`</span>
  <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
  opContext<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> FetchOptions<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Read-only of the current operation context, contains stuff like `headers`, `body` and `url` and other fetch options</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>

<span class="token keyword" data-v-52fb82fa data-v-52fb82fa>type</span> <span class="token class-name" data-v-52fb82fa data-v-52fb82fa>ClientPlugin</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> useResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> operation <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> ClientPluginContext<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=></span> <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>void</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>|</span> <span class="token builtin" data-v-52fb82fa data-v-52fb82fa>Promise</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>&lt;</span><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>void</span><span class="token operator" data-v-52fb82fa data-v-52fb82fa>></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
</code></pre></div>
<p data-v-52fb82fa data-v-52fb82fa>The following sections will explain the purpose of each item in the context</p>
<h3 id="useresult" data-v-52fb82fa data-v-52fb82fa><a href="#useresult" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>useResult()</h3>
<p data-v-52fb82fa data-v-52fb82fa>The <code data-v-52fb82fa data-v-52fb82fa>useResult</code> function allows your plugin to resolve a value for the GraphQL operation. Plugins like <code data-v-52fb82fa data-v-52fb82fa>fetch</code>, <code data-v-52fb82fa data-v-52fb82fa>batch</code> and <code data-v-52fb82fa data-v-52fb82fa>cache</code> make use of this as each of them is responsible for setting a response value for the GraphQL operation.</p>
<h4 id="non-terminating-results" data-v-52fb82fa data-v-52fb82fa><a href="#non-terminating-results" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>Non-terminating Results</h4>
<p data-v-52fb82fa data-v-52fb82fa>There is two types of <code data-v-52fb82fa data-v-52fb82fa>useResult</code> calls, the first being a <strong data-v-52fb82fa data-v-52fb82fa>non-terminating</strong> resolution, meaning that while your plugin found a value, it still wants other plugins to continue executing:</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token function" data-v-52fb82fa data-v-52fb82fa>useResult</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>response<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Other plugins will still execute</span>
</code></pre></div>
<p data-v-52fb82fa data-v-52fb82fa>This is useful for the <code data-v-52fb82fa data-v-52fb82fa>cache</code> plugin with the <code data-v-52fb82fa data-v-52fb82fa>cache-and-network</code> policy as it may decide to resolve an operation earlier (if found in cache) and leave the pipeline of plugins unaffected because it still needs to make a network request to fetch the fresh result.</p>
<h4 id="terminating-results" data-v-52fb82fa data-v-52fb82fa><a href="#terminating-results" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>Terminating Results</h4>
<p data-v-52fb82fa data-v-52fb82fa>The other type is a <strong data-v-52fb82fa data-v-52fb82fa>terminating</strong> resolution, meaning your plugin has decided to take over the pipeline and stop executing all others. This is useful with the <code data-v-52fb82fa data-v-52fb82fa>cache</code> plugin, because with the <code data-v-52fb82fa data-v-52fb82fa>cache-first</code> policy, it doesn't want any requests to go through.</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token function" data-v-52fb82fa data-v-52fb82fa>useResult</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>response<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token boolean" data-v-52fb82fa data-v-52fb82fa>true</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Stops all plugins after it</span>
</code></pre></div>
<div class="p-6 rounded my-8 border-l-4 dark-mode:bg-black bg-gray-100 border-accent-800 text-accent-800" data-v-21966d4a data-v-52fb82fa><div class="flex flex-row items-center" data-v-21966d4a><!----> <svg fill="currentColor" viewBox="0 0 20 20" class="h-6 w-6 mr-2" data-v-21966d4a><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z" data-v-21966d4a></path></svg> <p class="font-bold text-lg uppercase" data-v-21966d4a>tip</p></div> <div class="mt-4 text-black dark-mode:text-white" data-v-21966d4a>
<p data-v-21966d4a data-v-52fb82fa>Calling <code data-v-21966d4a data-v-52fb82fa>useResult</code> mutliple times in the pipeline (by multiple plugins) won't have an effect on the end result, the very first <code data-v-21966d4a data-v-52fb82fa>useResult</code> call will set the operation response, any subsequent calls are ignored.</p>
</div></div>
<h3 id="afterquery" data-v-52fb82fa data-v-52fb82fa><a href="#afterquery" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>afterQuery()</h3>
<p data-v-52fb82fa data-v-52fb82fa>The <code data-v-52fb82fa data-v-52fb82fa>afterQuery</code> function allows you to run a callback after the query is finished, the callback receives the GraphQL response as the first and only argument at the moment.</p>
<p data-v-52fb82fa data-v-52fb82fa>For example the <code data-v-52fb82fa data-v-52fb82fa>cache</code> plugin makes use of this to cache the operation response, here is an snippet of what happens in the <code data-v-52fb82fa data-v-52fb82fa>cache</code> plugin:</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>function</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>cachePlugin</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token parameter" data-v-52fb82fa data-v-52fb82fa><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> afterQuery<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> useResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> operation <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// ...</span>
  <span class="token function" data-v-52fb82fa data-v-52fb82fa>afterQuery</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token parameter" data-v-52fb82fa data-v-52fb82fa>result</span> <span class="token arrow operator" data-v-52fb82fa data-v-52fb82fa>=></span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
    <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Set the cache result after query is resolved</span>
    <span class="token function" data-v-52fb82fa data-v-52fb82fa>setCacheResult</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> result<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
  <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// ...</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>
</code></pre></div>
<h3 id="operation" data-v-52fb82fa data-v-52fb82fa><a href="#operation" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>operation</h3>
<p data-v-52fb82fa data-v-52fb82fa>The <code data-v-52fb82fa data-v-52fb82fa>operation</code> field contains useful information about the GraphQL operation being executed.</p>



































<table data-v-52fb82fa data-v-52fb82fa><thead data-v-52fb82fa data-v-52fb82fa><tr data-v-52fb82fa data-v-52fb82fa><th data-v-52fb82fa data-v-52fb82fa>Field</th><th data-v-52fb82fa data-v-52fb82fa>Type</th><th data-v-52fb82fa data-v-52fb82fa>Description</th></tr></thead><tbody data-v-52fb82fa data-v-52fb82fa><tr data-v-52fb82fa data-v-52fb82fa><td data-v-52fb82fa data-v-52fb82fa>query</td><td data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>string \| DocumentNode</code></td><td data-v-52fb82fa data-v-52fb82fa>The query/mutation being executed</td></tr><tr data-v-52fb82fa data-v-52fb82fa><td data-v-52fb82fa data-v-52fb82fa>variables</td><td data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>Record&lt;string, any></code></td><td data-v-52fb82fa data-v-52fb82fa>The query variables passed with the operation</td></tr><tr data-v-52fb82fa data-v-52fb82fa><td data-v-52fb82fa data-v-52fb82fa>cachePolicy</td><td data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>'cache-first' \| 'network-only' \| 'cache-and-network' \| 'cache-only'</code></td><td data-v-52fb82fa data-v-52fb82fa>The cache policy for this operation, useful if you are building a custom cache plugin</td></tr><tr data-v-52fb82fa data-v-52fb82fa><td data-v-52fb82fa data-v-52fb82fa>key</td><td data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>number</code></td><td data-v-52fb82fa data-v-52fb82fa>A unique identifier to use for this operation, useful for cache and dedup plugins</td></tr><tr data-v-52fb82fa data-v-52fb82fa><td data-v-52fb82fa data-v-52fb82fa>type</td><td data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>'query' \| 'mutation' \| 'subscription'</code></td><td data-v-52fb82fa data-v-52fb82fa>The operation type</td></tr></tbody></table>
<h3 id="opcontext" data-v-52fb82fa data-v-52fb82fa><a href="#opcontext" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>opContext</h3>
<p data-v-52fb82fa data-v-52fb82fa>The <code data-v-52fb82fa data-v-52fb82fa>opContext</code> field is the <code data-v-52fb82fa data-v-52fb82fa>fetch</code> options that will be passed to the <code data-v-52fb82fa data-v-52fb82fa>fetch</code> or <code data-v-52fb82fa data-v-52fb82fa>batch</code> plugins or your custom plugin that makes the actual request, it has the same shape as <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#Parameters" rel="nofollow noopener noreferrer" target="_blank" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>RequestInit</code> interface</a>. This is particularly useful if you are building a <code data-v-52fb82fa data-v-52fb82fa>fetch</code> plugin or some kind of authentication plugin with headers or cookies.</p>
<p data-v-52fb82fa data-v-52fb82fa>Here is a few useful snippets:</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>function</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>myPlugin</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token parameter" data-v-52fb82fa data-v-52fb82fa><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> opContext<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> operation <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Add auth headers</span>
  opContext<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>headers</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa><span class="token maybe-class-name" data-v-52fb82fa data-v-52fb82fa>Authorization</span></span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'Bearer {TOKEN}'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Encode additional information in the body</span>
  opContext<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>body</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token known-class-name class-name" data-v-52fb82fa data-v-52fb82fa>JSON</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token method function property-access" data-v-52fb82fa data-v-52fb82fa>stringify</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> query<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>query</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> variables<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>variables</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> mutationKey<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token number" data-v-52fb82fa data-v-52fb82fa>39933</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Change the URL dynamically</span>
  opContext<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>url</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'/other/graphql'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>
</code></pre></div>
<div class="p-6 rounded my-8 border-l-4 dark-mode:bg-black bg-gray-100 border-accent-800 text-accent-800" data-v-21966d4a data-v-52fb82fa><div class="flex flex-row items-center" data-v-21966d4a><!----> <svg fill="currentColor" viewBox="0 0 20 20" class="h-6 w-6 mr-2" data-v-21966d4a><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z" data-v-21966d4a></path></svg> <p class="font-bold text-lg uppercase" data-v-21966d4a>tip</p></div> <div class="mt-4 text-black dark-mode:text-white" data-v-21966d4a>
<p data-v-21966d4a data-v-52fb82fa>All plugins are processed in the same order they were added in, and as you can imagine the order of these plugins is critical as some plugins may override options for others and some may resolve the value too early. So keep the order in mind when defining the plugins</p>
</div></div>
<h2 id="example-adding-authorization-headers" data-v-52fb82fa data-v-52fb82fa><a href="#example-adding-authorization-headers" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>Example: Adding Authorization Headers</h2>
<p data-v-52fb82fa data-v-52fb82fa>It's very likely you have a authentication header you would like to add to your queries to be able to execute protected queries/mutations. A very common header is <code data-v-52fb82fa data-v-52fb82fa>Authorization</code> header which contains an auth token. Here is a snippet that shows how to add such headers to your queries:</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>function</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>authPlugin</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token parameter" data-v-52fb82fa data-v-52fb82fa><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> opContext <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  opContext<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>headers</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa><span class="token maybe-class-name" data-v-52fb82fa data-v-52fb82fa>Authorization</span></span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'Bearer {TOKEN}'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>

<span class="token comment" data-v-52fb82fa data-v-52fb82fa>// later in your setup</span>
<span class="token keyword module" data-v-52fb82fa data-v-52fb82fa>import</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> useClient<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> defaultPlugins <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span> <span class="token keyword module" data-v-52fb82fa data-v-52fb82fa>from</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'villus'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

<span class="token function" data-v-52fb82fa data-v-52fb82fa>useClient</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  url<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'/graphql'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span>
  use<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>[</span>authPlugin<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token spread operator" data-v-52fb82fa data-v-52fb82fa>...</span><span class="token method function property-access" data-v-52fb82fa data-v-52fb82fa>defaultPlugins</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>]</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// add the auth plugin alongside the default plugins</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
</code></pre></div>
<p data-v-52fb82fa data-v-52fb82fa>And that's it,</p>
<h2 id="example-persistent-cache" data-v-52fb82fa data-v-52fb82fa><a href="#example-persistent-cache" aria-hidden="true" tabindex="-1" data-v-52fb82fa data-v-52fb82fa><span class="icon icon-link" data-v-52fb82fa data-v-52fb82fa></span></a>Example: Persistent Cache</h2>
<p data-v-52fb82fa data-v-52fb82fa>You might want to create a custom cache especially that villus default cache plugin does not persist when the page is reloaded or when the client is destroyed, this is because villus default cache is a simple object in memory that keeps track of queries during runtime and each time the page is reloaded or when the client is initialized, it will start with a new object each time. This is convenient for most cases but you might want to leverage a more permanent cache solution.</p>
<p data-v-52fb82fa data-v-52fb82fa>In our example we will use <code data-v-52fb82fa data-v-52fb82fa>localStorage</code> as our storage to cache queries, you are free to use anything else as a storage like <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API" rel="nofollow noopener noreferrer" target="_blank" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>indexedDB</code></a> which should offer more powerful capabilities and flexibility.</p>
<p data-v-52fb82fa data-v-52fb82fa>Here is an example of such cache:</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token keyword" data-v-52fb82fa data-v-52fb82fa>return</span> <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>function</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>localStorageCache</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token parameter" data-v-52fb82fa data-v-52fb82fa><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> afterQuery<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> useResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> operation <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span></span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// avoid caching mutations or subscriptions, also avoid caching queries with `network-only` policy</span>
  <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>if</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>type</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>!==</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'query'</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>||</span> operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>cachePolicy</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>===</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'network-only'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
    <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>return</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
  <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>

  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Set the cache result after query is resolved</span>
  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Using the `operation.key` is very handy here, it is a unique value that identifies this operation</span>
  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// The key is calculated from the query itself and it's variables</span>
  <span class="token function" data-v-52fb82fa data-v-52fb82fa>afterQuery</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token parameter" data-v-52fb82fa data-v-52fb82fa>result</span> <span class="token arrow operator" data-v-52fb82fa data-v-52fb82fa>=></span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
    <span class="token dom variable" data-v-52fb82fa data-v-52fb82fa>localStorage</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token method function property-access" data-v-52fb82fa data-v-52fb82fa>setItem</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>key</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> result<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
  <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Get cached item</span>
  <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>const</span> cachedResult <span class="token operator" data-v-52fb82fa data-v-52fb82fa>=</span> <span class="token dom variable" data-v-52fb82fa data-v-52fb82fa>localStorage</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token method function property-access" data-v-52fb82fa data-v-52fb82fa>getItem</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>key</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

  <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// if exists in cache, terminate with result</span>
  <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>if</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>cachedResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
    <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// The first argument of `useResult` is the final value of the operation</span>
    <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// The second argument is optional, it allows the plugin to terminate the operation</span>
    <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// and stop all other plugins from executing, the last plugin must terminate with `true`</span>
    <span class="token keyword" data-v-52fb82fa data-v-52fb82fa>return</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>useResult</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>cachedResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token boolean" data-v-52fb82fa data-v-52fb82fa>true</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
  <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

<span class="token comment" data-v-52fb82fa data-v-52fb82fa>// later in your setup</span>
<span class="token keyword module" data-v-52fb82fa data-v-52fb82fa>import</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span> useClient<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> fetch <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span> <span class="token keyword module" data-v-52fb82fa data-v-52fb82fa>from</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'villus'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>

<span class="token function" data-v-52fb82fa data-v-52fb82fa>useClient</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>{</span>
  url<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'/graphql'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span>
  use<span class="token operator" data-v-52fb82fa data-v-52fb82fa>:</span> <span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>[</span>localStorageCache<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>fetch</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>]</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> <span class="token comment" data-v-52fb82fa data-v-52fb82fa>// add the local storage plugin along with the fetch plugin</span>
<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>}</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
</code></pre></div>
<p data-v-52fb82fa data-v-52fb82fa>In the previous sample, our cache plugin does not handle <code data-v-52fb82fa data-v-52fb82fa>cache-and-network</code> policy because it terminates the operation once it finds a cached value in local storage. To simply support it you could check if the cache policy is <code data-v-52fb82fa data-v-52fb82fa>cache-first</code> which doesn't require any cache invalidations/update after resolving the value. So you need to terminate the operation conditionally if the policy is <code data-v-52fb82fa data-v-52fb82fa>cache-first</code> or not.</p>
<div class="nuxt-content-highlight" data-v-52fb82fa data-v-52fb82fa><pre class="line-numbers language-js" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa><span class="token comment" data-v-52fb82fa data-v-52fb82fa>// ...</span>
<span class="token comment" data-v-52fb82fa data-v-52fb82fa>// Terminate operation only if the cache policy is cache-first</span>
<span class="token keyword" data-v-52fb82fa data-v-52fb82fa>return</span> <span class="token function" data-v-52fb82fa data-v-52fb82fa>useResult</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>(</span>cachedResult<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>,</span> operation<span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>.</span><span class="token property-access" data-v-52fb82fa data-v-52fb82fa>cachePolicy</span> <span class="token operator" data-v-52fb82fa data-v-52fb82fa>===</span> <span class="token string" data-v-52fb82fa data-v-52fb82fa>'cache-first'</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>)</span><span class="token punctuation" data-v-52fb82fa data-v-52fb82fa>;</span>
</code></pre></div>
<p data-v-52fb82fa data-v-52fb82fa>For reference you may look at the implementation of the <a href="https://github.com/logaretm/villus/blob/master/packages/villus/src/cache.ts" rel="nofollow noopener noreferrer" target="_blank" data-v-52fb82fa data-v-52fb82fa><code data-v-52fb82fa data-v-52fb82fa>cache</code> plugin</a></p></div></main> <div class="lside hidden lg:block" data-v-e9769f5a><aside data-fetch-key="0" class="px-6 pt-24 sticky top-0" data-v-ee0b0be6 data-v-e9769f5a><nav class="space-y-8 text-sm" data-v-ee0b0be6><div data-v-ee0b0be6><p class="text-xs font-bold text-gray-800 uppercase" data-v-ee0b0be6>
        guide
      </p> <ul class="mt-3 space-y-2" data-v-ee0b0be6><li data-v-ee0b0be6><a href="/villus/guide/overview" data-v-ee0b0be6>Overview</a></li><li data-v-ee0b0be6><a href="/villus/guide/setup" data-v-ee0b0be6>Application Setup</a></li><li data-v-ee0b0be6><a href="/villus/guide/queries" data-v-ee0b0be6>Queries</a></li><li data-v-ee0b0be6><a href="/villus/guide/mutations" data-v-ee0b0be6>Mutations</a></li><li data-v-ee0b0be6><a href="/villus/guide/subscriptions" data-v-ee0b0be6>Subscriptions</a></li><li data-v-ee0b0be6><a href="/villus/guide/plugins" aria-current="page" class="nuxt-link-exact-active nuxt-link-active" data-v-ee0b0be6>Plugins</a></li></ul></div><div data-v-ee0b0be6><p class="text-xs font-bold text-gray-800 uppercase" data-v-ee0b0be6>
        plugins
      </p> <ul class="mt-3 space-y-2" data-v-ee0b0be6><li data-v-ee0b0be6><a href="/villus/plugins/fetch" data-v-ee0b0be6>Fetch Plugin</a></li><li data-v-ee0b0be6><a href="/villus/plugins/cache" data-v-ee0b0be6>Cache Plugin</a></li><li data-v-ee0b0be6><a href="/villus/plugins/batch" data-v-ee0b0be6>Query Batching Plugin</a></li><li data-v-ee0b0be6><a href="/villus/plugins/multipart" data-v-ee0b0be6>File Uploads</a></li><li data-v-ee0b0be6><a href="/villus/plugins/handle-subscriptions" data-v-ee0b0be6>Handle Subscriptions Plugin</a></li></ul></div><div data-v-ee0b0be6><p class="text-xs font-bold text-gray-800 uppercase" data-v-ee0b0be6>
        examples
      </p> <ul class="mt-3 space-y-2" data-v-ee0b0be6><li data-v-ee0b0be6><a href="/villus/examples/basic-query" data-v-ee0b0be6>Basic Query</a></li><li data-v-ee0b0be6><a href="/villus/examples/suspense" data-v-ee0b0be6>Query with Suspense</a></li></ul></div><div data-v-ee0b0be6><p class="text-xs font-bold text-gray-800 uppercase" data-v-ee0b0be6>
        api reference
      </p> <ul class="mt-3 space-y-2" data-v-ee0b0be6><li data-v-ee0b0be6><a href="/villus/api/client" data-v-ee0b0be6>Client</a></li><li data-v-ee0b0be6><a href="/villus/api/use-query" data-v-ee0b0be6>useQuery()</a></li><li data-v-ee0b0be6><a href="/villus/api/use-mutation" data-v-ee0b0be6>useMutation()</a></li><li data-v-ee0b0be6><a href="/villus/api/use-subscription" data-v-ee0b0be6>useSubscription()</a></li><li data-v-ee0b0be6><a href="/villus/api/query" data-v-ee0b0be6>&lt;Query /></a></li><li data-v-ee0b0be6><a href="/villus/api/mutation" data-v-ee0b0be6>&lt;Mutation /></a></li><li data-v-ee0b0be6><a href="/villus/api/subscription" data-v-ee0b0be6>&lt;Subscription /></a></li></ul></div></nav></aside></div> <div class="rside hidden xl:block" data-v-e9769f5a><aside class="sticky top-0" data-v-ee25ff46 data-v-e9769f5a><nav class="pt-24" data-v-ee25ff46><p class="font-bold text-xs uppercase text-gray-800" data-v-ee25ff46>On this page</p> <ul class="mt-4 space-y-1 text-sm" data-v-ee25ff46><li data-v-ee25ff46><a href="/villus/guide/plugins#plugins-under-the-hood" class="inline-block py-1" data-v-ee25ff46>Plugins under the hood</a></li><li class="ml-4" data-v-ee25ff46><a href="/villus/guide/plugins#useresult" class="inline-block py-1" data-v-ee25ff46>useResult()</a></li><li class="ml-4" data-v-ee25ff46><a href="/villus/guide/plugins#afterquery" class="inline-block py-1" data-v-ee25ff46>afterQuery()</a></li><li class="ml-4" data-v-ee25ff46><a href="/villus/guide/plugins#operation" class="inline-block py-1" data-v-ee25ff46>operation</a></li><li class="ml-4" data-v-ee25ff46><a href="/villus/guide/plugins#opcontext" class="inline-block py-1" data-v-ee25ff46>opContext</a></li><li data-v-ee25ff46><a href="/villus/guide/plugins#example-adding-authorization-headers" class="inline-block py-1" data-v-ee25ff46>Example: Adding Authorization Headers</a></li><li data-v-ee25ff46><a href="/villus/guide/plugins#example-persistent-cache" class="inline-block py-1" data-v-ee25ff46>Example: Persistent Cache</a></li></ul></nav></aside></div></div></div></div></div><script>window.__NUXT__=function(e,p,a,t,l,s,r,y,c,u,i,n,o,h,v,d,g,m,N,f,b,w,x,k,q,T,P,C,I,A,R,S,H,Q,F,O,E,L,U,z,G,_,B,D,j,M,K,W,Z,J,X,Y,V,$,ee,pe,ae,te,le,se,re,ye,ce,ue,ie,ne,oe,he,ve,de,ge,me,Ne,fe,be,we,xe,ke,qe,Te,Pe,Ce,Ie,Ae,Re,Se,He,Qe,Fe,Oe,Ee,Le,Ue,ze,Ge,_e,Be,De,je,Me,Ke,We,Ze,Je,Xe,Ye,Ve,$e,ep,pp,ap,tp,lp,sp,rp,yp,cp,up,ip,np,op,hp,vp,dp,gp,mp,Np,fp){return Le.title=ce,Le.description="Learn how villus plugins work",Le.order=6,Le.toc=[{id:Ue,depth:2,text:ze},{id:Ge,depth:3,text:_e},{id:Be,depth:3,text:De},{id:S,depth:3,text:S},{id:je,depth:3,text:ue},{id:Me,depth:2,text:Ke},{id:We,depth:2,text:Ze}],Le.body={type:"root",children:[{type:p,tag:"h1",props:{id:ie},children:[{type:p,tag:T,props:{href:"#plugins",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:ce}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"villus is very flexible and versatile, and as such you will need to write quite a few plugins of your own for various purposes, wehter to add special headers, transform the body to a specific format or encoding, or even change the "},{type:p,tag:c,props:{},children:[{type:e,value:G}]},{type:e,value:" function used."}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"Something you might not be aware of is that villus is pre-configured with a couple of plugins that are necessary to execute queries, the default plugins are:"}]},{type:e,value:r},{type:p,tag:"ul",props:{},children:[{type:e,value:r},{type:p,tag:C,props:{},children:[{type:p,tag:Y,props:{to:Je},children:[{type:p,tag:c,props:{},children:[{type:e,value:G}]}]},{type:e,value:": used to execute queries on the network (actual fetching)"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:p,tag:Y,props:{to:Xe},children:[{type:p,tag:c,props:{},children:[{type:e,value:D}]}]},{type:e,value:": an in-memory simple cache that comes with villus by default, supports all cache policies"}]},{type:e,value:r}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"Furthermore, villus exposes the default plugins as "},{type:p,tag:c,props:{},children:[{type:e,value:ne}]},{type:e,value:" function. To add plugins to villus client you need to pass a "},{type:p,tag:c,props:{},children:[{type:e,value:"use"}]},{type:e,value:" array containing the plugins you would like to have"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:oe}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,n,M]},children:[{type:e,value:he}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:ve},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:Ye},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n,M]},children:[{type:e,value:de}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:ge}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:me}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:pe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:Ne}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:fe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:"["}]},{type:p,tag:a,props:{className:[t,"spread",y]},children:[{type:e,value:"..."}]},{type:p,tag:a,props:{className:[t,V,h,w]},children:[{type:e,value:ne}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:"]"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// if not provided `defaultPlugins` will be used"}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"In addition to the default plugins, villus also offers the following plugins but they are not enabled by default:"}]},{type:e,value:r},{type:p,tag:"ul",props:{},children:[{type:e,value:r},{type:p,tag:C,props:{},children:[{type:p,tag:Y,props:{to:Ve},children:[{type:p,tag:c,props:{},children:[{type:e,value:be}]}]},{type:e,value:": used instead of "},{type:p,tag:c,props:{},children:[{type:e,value:G}]},{type:e,value:" to execute queries in batches on the network"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:p,tag:Y,props:{to:$e},children:[{type:p,tag:c,props:{},children:[{type:e,value:"multipart"}]}]},{type:e,value:": Adds File upload support"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:p,tag:Y,props:{to:ep},children:[{type:p,tag:c,props:{},children:[{type:e,value:"handleSubscriptions"}]}]},{type:e,value:": Adds GraphQL subscriptions support"}]},{type:e,value:r}]},{type:e,value:r},{type:p,tag:"h2",props:{id:Ue},children:[{type:p,tag:T,props:{href:"#plugins-under-the-hood",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:ze}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"Under the hood, plugins are simple callbacks that run through various life-cycles of the operation execution, the main features of villus plugins compared to other libraries are:"}]},{type:e,value:r},{type:p,tag:"ul",props:{},children:[{type:e,value:r},{type:p,tag:C,props:{},children:[{type:e,value:"All plugins can be synchronous or asynchronous"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:e,value:"They will be executed at the same order they are defined in"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:e,value:"Each plugin can set anything about the current operation fetch options, like "},{type:p,tag:c,props:{},children:[{type:e,value:"url"}]},{type:e,value:we},{type:p,tag:c,props:{},children:[{type:e,value:"body"}]},{type:e,value:we},{type:p,tag:c,props:{},children:[{type:e,value:xe}]},{type:e,value:" (ex: adding auth token to headers)"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:e,value:"Each plugin can choose to set the operation result at any time without stopping other plugins (ex: cache plugins)"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:e,value:"Each plugin can choose to end the operation with a specific result while skipping other plugins by setting the terminate signal (ex: fetch and batch plugins)"}]},{type:e,value:r},{type:p,tag:C,props:{},children:[{type:e,value:"Each plugin can execute a callback that's synchronous or asynchronous after the query is executed (ex: cache plugin)"}]},{type:e,value:r}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"A villus plugin has a type called "},{type:p,tag:c,props:{},children:[{type:e,value:pp}]},{type:e,value:" and it looks like this in TypeScript:"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,"language-typescript"]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:K}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,j]},children:[{type:e,value:"OperationType"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:ap}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"|"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:"'mutation'"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"|"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:"'subscription'"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:K}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,j]},children:[{type:e,value:"AfterQueryCallback"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:ae},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:tp},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:W}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:Z}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"|"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:lp}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:Z}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:">"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:sp}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,j]},children:[{type:e,value:"FetchOptions"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:"extends"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,j]},children:[{type:e,value:rp}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:pe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"?"}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:b}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:sp}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,j]},children:[{type:e,value:"ClientPluginContext"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,yp,h]},children:[{type:e,value:U}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:ae},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:tp},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:"unknown"}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:">"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:" terminate"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"?"}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:ke}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:W}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:Z}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// used to signal that the plugin found a result for the operation"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,yp,h]},children:[{type:e,value:te}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:"cb"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" AfterQueryCallback"},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:W}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:Z}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Registers a callback to do something after the query is finished and the pipeline is done"}]},{type:e,value:"\n  operation"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:"\n    query"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" DocumentNode "},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"|"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:b}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// The query/mutation to be executed"}]},{type:e,value:"\n    variables"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" Record"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:b}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:"any"}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:">"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// The query variables"}]},{type:e,value:"\n    cachePolicy"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" CachePolicy"},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// The cache policy for this operation"}]},{type:e,value:"\n    key"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:qe}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// a unique key to identify this operation (useful for cache)"}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:K}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" OperationType"},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// the operation type: `query` or `mutation` or `subscription`"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:$},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" FetchOptions"},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Read-only of the current operation context, contains stuff like `headers`, `body` and `url` and other fetch options"}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:K}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,j]},children:[{type:e,value:pp}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:Te},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:le},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:" ClientPluginContext"},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:W}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:Z}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"|"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,L]},children:[{type:e,value:lp}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"<"}]},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:Z}]},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:">"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"The following sections will explain the purpose of each item in the context"}]},{type:e,value:r},{type:p,tag:"h3",props:{id:Ge},children:[{type:p,tag:T,props:{href:"#useresult",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:_e}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:se},{type:p,tag:c,props:{},children:[{type:e,value:U}]},{type:e,value:" function allows your plugin to resolve a value for the GraphQL operation. Plugins like "},{type:p,tag:c,props:{},children:[{type:e,value:G}]},{type:e,value:", "},{type:p,tag:c,props:{},children:[{type:e,value:be}]},{type:e,value:" and "},{type:p,tag:c,props:{},children:[{type:e,value:D}]},{type:e,value:" make use of this as each of them is responsible for setting a response value for the GraphQL operation."}]},{type:e,value:r},{type:p,tag:"h4",props:{id:"non-terminating-results"},children:[{type:p,tag:T,props:{href:"#non-terminating-results",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:"Non-terminating Results"}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"There is two types of "},{type:p,tag:c,props:{},children:[{type:e,value:U}]},{type:e,value:" calls, the first being a "},{type:p,tag:"strong",props:{},children:[{type:e,value:"non-terminating"}]},{type:e,value:" resolution, meaning that while your plugin found a value, it still wants other plugins to continue executing:"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:U}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:cp},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Other plugins will still execute"}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"This is useful for the "},{type:p,tag:c,props:{},children:[{type:e,value:D}]},{type:e,value:" plugin with the "},{type:p,tag:c,props:{},children:[{type:e,value:up}]},{type:e,value:" policy as it may decide to resolve an operation earlier (if found in cache) and leave the pipeline of plugins unaffected because it still needs to make a network request to fetch the fresh result."}]},{type:e,value:r},{type:p,tag:"h4",props:{id:"terminating-results"},children:[{type:p,tag:T,props:{href:"#terminating-results",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:"Terminating Results"}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"The other type is a "},{type:p,tag:"strong",props:{},children:[{type:e,value:"terminating"}]},{type:e,value:" resolution, meaning your plugin has decided to take over the pipeline and stop executing all others. This is useful with the "},{type:p,tag:c,props:{},children:[{type:e,value:D}]},{type:e,value:" plugin, because with the "},{type:p,tag:c,props:{},children:[{type:e,value:Pe}]},{type:e,value:" policy, it doesn't want any requests to go through."}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:U}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:cp},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,ke]},children:[{type:e,value:P}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Stops all plugins after it"}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:ip,props:{},children:[{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"Calling "},{type:p,tag:c,props:{},children:[{type:e,value:U}]},{type:e,value:" mutliple times in the pipeline (by multiple plugins) won't have an effect on the end result, the very first "},{type:p,tag:c,props:{},children:[{type:e,value:U}]},{type:e,value:" call will set the operation response, any subsequent calls are ignored."}]},{type:e,value:r}]},{type:e,value:r},{type:p,tag:"h3",props:{id:Be},children:[{type:p,tag:T,props:{href:"#afterquery",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:De}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:se},{type:p,tag:c,props:{},children:[{type:e,value:te}]},{type:e,value:" function allows you to run a callback after the query is finished, the callback receives the GraphQL response as the first and only argument at the moment."}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"For example the "},{type:p,tag:c,props:{},children:[{type:e,value:D}]},{type:e,value:" plugin makes use of this to cache the operation response, here is an snippet of what happens in the "},{type:p,tag:c,props:{},children:[{type:e,value:D}]},{type:e,value:" plugin:"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:h}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:"cachePlugin"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,J]},children:[{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:np},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:Te},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:le},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:Ce}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:te}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,J]},children:[{type:e,value:ae}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,"arrow",y]},children:[{type:e,value:W}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:op}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:"setCacheResult"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:S},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:hp},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:Ce}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:"h3",props:{id:S},children:[{type:p,tag:T,props:{href:"#operation",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:S}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:se},{type:p,tag:c,props:{},children:[{type:e,value:S}]},{type:e,value:" field contains useful information about the GraphQL operation being executed."}]},{type:e,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:p,tag:"table",props:{},children:[{type:p,tag:"thead",props:{},children:[{type:p,tag:X,props:{},children:[{type:p,tag:"th",props:{},children:[{type:e,value:"Field"}]},{type:p,tag:"th",props:{},children:[{type:e,value:"Type"}]},{type:p,tag:"th",props:{},children:[{type:e,value:"Description"}]}]}]},{type:p,tag:"tbody",props:{},children:[{type:p,tag:X,props:{},children:[{type:p,tag:q,props:{},children:[{type:e,value:"query"}]},{type:p,tag:q,props:{},children:[{type:p,tag:c,props:{},children:[{type:e,value:"string \\| DocumentNode"}]}]},{type:p,tag:q,props:{},children:[{type:e,value:"The query/mutation being executed"}]}]},{type:p,tag:X,props:{},children:[{type:p,tag:q,props:{},children:[{type:e,value:vp}]},{type:p,tag:q,props:{},children:[{type:p,tag:c,props:{},children:[{type:e,value:"Record<string, any>"}]}]},{type:p,tag:q,props:{},children:[{type:e,value:"The query variables passed with the operation"}]}]},{type:p,tag:X,props:{},children:[{type:p,tag:q,props:{},children:[{type:e,value:Ie}]},{type:p,tag:q,props:{},children:[{type:p,tag:c,props:{},children:[{type:e,value:"'cache-first' \\| 'network-only' \\| 'cache-and-network' \\| 'cache-only'"}]}]},{type:p,tag:q,props:{},children:[{type:e,value:"The cache policy for this operation, useful if you are building a custom cache plugin"}]}]},{type:p,tag:X,props:{},children:[{type:p,tag:q,props:{},children:[{type:e,value:"key"}]},{type:p,tag:q,props:{},children:[{type:p,tag:c,props:{},children:[{type:e,value:qe}]}]},{type:p,tag:q,props:{},children:[{type:e,value:"A unique identifier to use for this operation, useful for cache and dedup plugins"}]}]},{type:p,tag:X,props:{},children:[{type:p,tag:q,props:{},children:[{type:e,value:K}]},{type:p,tag:q,props:{},children:[{type:p,tag:c,props:{},children:[{type:e,value:"'query' \\| 'mutation' \\| 'subscription'"}]}]},{type:p,tag:q,props:{},children:[{type:e,value:"The operation type"}]}]}]}]},{type:e,value:r},{type:p,tag:"h3",props:{id:je},children:[{type:p,tag:T,props:{href:"#opcontext",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:ue}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:se},{type:p,tag:c,props:{},children:[{type:e,value:ue}]},{type:e,value:" field is the "},{type:p,tag:c,props:{},children:[{type:e,value:G}]},{type:e,value:" options that will be passed to the "},{type:p,tag:c,props:{},children:[{type:e,value:G}]},{type:e,value:we},{type:p,tag:c,props:{},children:[{type:e,value:be}]},{type:e,value:" plugins or your custom plugin that makes the actual request, it has the same shape as "},{type:p,tag:T,props:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#Parameters",rel:[Ae,Re,Se],target:He},children:[{type:p,tag:c,props:{},children:[{type:e,value:rp}]},{type:e,value:" interface"}]},{type:e,value:". This is particularly useful if you are building a "},{type:p,tag:c,props:{},children:[{type:e,value:G}]},{type:e,value:" plugin or some kind of authentication plugin with headers or cookies."}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"Here is a few useful snippets:"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:h}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:"myPlugin"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,J]},children:[{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:" opContext"},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:le},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Add auth headers"}]},{type:e,value:$},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:xe}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:p,tag:a,props:{className:[t,dp]},children:[{type:e,value:Qe}]}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:gp}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:ee},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Encode additional information in the body"}]},{type:e,value:$},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:"body"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,"known-class-name",j]},children:[{type:e,value:"JSON"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,V,h,w]},children:[{type:e,value:"stringify"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:" query"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:re},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:"query"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:" variables"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:re},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:vp}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:" mutationKey"},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,qe]},children:[{type:e,value:"39933"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:ee},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Change the URL dynamically"}]},{type:e,value:$},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:"url"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:"'/other/graphql'"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:ip,props:{},children:[{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"All plugins are processed in the same order they were added in, and as you can imagine the order of these plugins is critical as some plugins may override options for others and some may resolve the value too early. So keep the order in mind when defining the plugins"}]},{type:e,value:r}]},{type:e,value:r},{type:p,tag:"h2",props:{id:Me},children:[{type:p,tag:T,props:{href:"#example-adding-authorization-headers",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:Ke}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"It's very likely you have a authentication header you would like to add to your queries to be able to execute protected queries/mutations. A very common header is "},{type:p,tag:c,props:{},children:[{type:e,value:Qe}]},{type:e,value:" header which contains an auth token. Here is a snippet that shows how to add such headers to your queries:"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:h}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:mp}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,J]},children:[{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:" opContext "},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:$},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:xe}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:p,tag:a,props:{className:[t,dp]},children:[{type:e,value:Qe}]}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:gp}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:oe}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,n,M]},children:[{type:e,value:he}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:ve},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:Ye},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n,M]},children:[{type:e,value:de}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:ge}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:me}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:pe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:Ne}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:fe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:"["}]},{type:e,value:mp},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,"spread",y]},children:[{type:e,value:"..."}]},{type:p,tag:a,props:{className:[t,V,h,w]},children:[{type:e,value:ne}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:"]"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// add the auth plugin alongside the default plugins"}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"And that's it,"}]},{type:e,value:r},{type:p,tag:"h2",props:{id:We},children:[{type:p,tag:T,props:{href:"#example-persistent-cache",ariaHidden:P,tabIndex:I},children:[{type:p,tag:a,props:{className:[A,R]},children:[]}]},{type:e,value:Ze}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"You might want to create a custom cache especially that villus default cache plugin does not persist when the page is reloaded or when the client is destroyed, this is because villus default cache is a simple object in memory that keeps track of queries during runtime and each time the page is reloaded or when the client is initialized, it will start with a new object each time. This is convenient for most cases but you might want to leverage a more permanent cache solution."}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"In our example we will use "},{type:p,tag:c,props:{},children:[{type:e,value:Fe}]},{type:e,value:" as our storage to cache queries, you are free to use anything else as a storage like "},{type:p,tag:T,props:{href:"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API",rel:[Ae,Re,Se],target:He},children:[{type:p,tag:c,props:{},children:[{type:e,value:"indexedDB"}]}]},{type:e,value:" which should offer more powerful capabilities and flexibility."}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"Here is an example of such cache:"}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:ye}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:h}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:Np}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,J]},children:[{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:np},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:Te},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:le},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// avoid caching mutations or subscriptions, also avoid caching queries with `network-only` policy"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:"if"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:S},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:K}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"!=="}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:ap}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"||"}]},{type:e,value:re},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:Ie}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"==="}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:"'network-only'"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:ye}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:ee},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:op}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Using the `operation.key` is very handy here, it is a unique value that identifies this operation"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// The key is calculated from the query itself and it's variables"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:te}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,J]},children:[{type:e,value:ae}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,"arrow",y]},children:[{type:e,value:W}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,"dom",fp]},children:[{type:e,value:Fe}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,V,h,w]},children:[{type:e,value:"setItem"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:S},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:"key"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:hp},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:ee},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Get cached item"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:"const"}]},{type:e,value:" cachedResult "},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:B}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,"dom",fp]},children:[{type:e,value:Fe}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,V,h,w]},children:[{type:e,value:"getItem"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:S},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:"key"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:ee},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// if exists in cache, terminate with result"}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:"if"}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:Oe},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// The first argument of `useResult` is the final value of the operation"}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// The second argument is optional, it allows the plugin to terminate the operation"}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// and stop all other plugins from executing, the last plugin must terminate with `true`"}]},{type:e,value:z},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:ye}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:U}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:Oe},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,ke]},children:[{type:e,value:P}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:x},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:oe}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,n,M]},children:[{type:e,value:he}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:ve},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:" fetch "},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,n,M]},children:[{type:e,value:de}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:ge}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:E},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:me}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:N}]},{type:e,value:pe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:Ne}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:fe},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:m}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:"["}]},{type:e,value:Np},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:G}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:"]"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// add the local storage plugin along with the fetch plugin"}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:f}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"In the previous sample, our cache plugin does not handle "},{type:p,tag:c,props:{},children:[{type:e,value:up}]},{type:e,value:" policy because it terminates the operation once it finds a cached value in local storage. To simply support it you could check if the cache policy is "},{type:p,tag:c,props:{},children:[{type:e,value:Pe}]},{type:e,value:" which doesn't require any cache invalidations/update after resolving the value. So you need to terminate the operation conditionally if the policy is "},{type:p,tag:c,props:{},children:[{type:e,value:Pe}]},{type:e,value:" or not."}]},{type:e,value:r},{type:p,tag:H,props:{className:[Q]},children:[{type:p,tag:F,props:{className:[O,_]},children:[{type:p,tag:c,props:{},children:[{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:Ce}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,i]},children:[{type:e,value:"// Terminate operation only if the cache policy is cache-first"}]},{type:e,value:r},{type:p,tag:a,props:{className:[t,n]},children:[{type:e,value:ye}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,h]},children:[{type:e,value:U}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:v}]},{type:e,value:Oe},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:o}]},{type:e,value:re},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:k}]},{type:p,tag:a,props:{className:[t,w]},children:[{type:e,value:Ie}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,y]},children:[{type:e,value:"==="}]},{type:e,value:s},{type:p,tag:a,props:{className:[t,b]},children:[{type:e,value:"'cache-first'"}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:d}]},{type:p,tag:a,props:{className:[t,l]},children:[{type:e,value:u}]},{type:e,value:r}]}]}]},{type:e,value:r},{type:p,tag:g,props:{},children:[{type:e,value:"For reference you may look at the implementation of the "},{type:p,tag:T,props:{href:"https://github.com/logaretm/villus/blob/master/packages/villus/src/cache.ts",rel:[Ae,Re,Se],target:He},children:[{type:p,tag:c,props:{},children:[{type:e,value:D}]},{type:e,value:" plugin"}]}]}]},Le.dir="/guide",Le.path=Ee,Le.extension=".md",Le.slug=ie,Le.createdAt="2020-10-07T03:49:42.865Z",Le.updatedAt="2020-10-08T23:57:17.023Z",{layout:"default",data:[{page:Le}],fetch:[{categories:[{title:"guide",pages:[{title:"Overview",order:1,path:"/guide/overview"},{title:"Application Setup",order:2,path:"/guide/setup"},{title:"Queries",order:3,path:"/guide/queries"},{title:"Mutations",order:4,path:"/guide/mutations"},{title:"Subscriptions",order:5,path:"/guide/subscriptions"},{title:ce,order:6,path:Ee}]},{title:ie,pages:[{title:"Fetch Plugin",order:1,path:Je},{title:"Cache Plugin",order:2,path:Xe},{title:"Query Batching Plugin",order:3,path:Ve},{title:"File Uploads",order:4,path:$e},{title:"Handle Subscriptions Plugin",order:5,path:ep}]},{title:"examples",pages:[{title:"Basic Query",order:1,path:"/examples/basic-query"},{title:"Query with Suspense",order:2,path:"/examples/suspense"}]},{title:"api reference",pages:[{title:"Client",path:"/api/client"},{title:"useQuery()",order:1,path:"/api/use-query"},{title:"useMutation()",order:2,path:"/api/use-mutation"},{title:"useSubscription()",order:3,path:"/api/use-subscription"},{title:"<Query />",order:4,path:"/api/query"},{title:"<Mutation />",order:5,path:"/api/mutation"},{title:"<Subscription />",order:6,path:"/api/subscription"}]}]}],error:null,state:{doc:Le,theme:"light"},serverRendered:!0,routePath:Ee,config:{appURL:"https://logaretm.github.io/villus/",content:{dbHash:"40ac29c1"}}}}("text","element","span","token","punctuation"," ","\n","operator","code",";","comment","keyword",",","function","(",")","p",":","{","}","string","property-access","\n  ",".","td","a","true","li",-1,"icon","icon-link","operation","div","nuxt-content-highlight","pre","line-numbers","\n\n","builtin","useResult","\n    ","fetch","language-js","=","cache","class-name","module","type","=>","void","parameter","tr","nuxt-link","method","\n  opContext","\n\n  ","\n  url","result","afterQuery"," operation ","The "," operation","return","Plugins","opContext","plugins","defaultPlugins","// later in your setup","import"," useClient","from","'villus'","useClient","'/graphql'","\n  use","batch"," or ","headers","boolean","number"," useResult","cache-first","// ...","cachePolicy","nofollow","noopener","noreferrer","_blank","Authorization","localStorage","cachedResult","/guide/plugins",{},"plugins-under-the-hood","Plugins under the hood","useresult","useResult()","afterquery","afterQuery()","opcontext","example-adding-authorization-headers","Example: Adding Authorization Headers","example-persistent-cache","Example: Persistent Cache","/plugins/fetch","/plugins/cache"," defaultPlugins ","/plugins/batch","/plugins/multipart","/plugins/handle-subscriptions","ClientPlugin","'query'"," OperationResult","Promise","interface","RequestInit","function-variable","response","cache-and-network","doc-tip"," afterQuery","// Set the cache result after query is resolved"," result","variables","maybe-class-name","'Bearer {TOKEN}'","authPlugin","localStorageCache","variable")</script><script src="/villus/_nuxt/d2fbd09.js" defer></script><script src="/villus/_nuxt/c225518.js" defer></script><script src="/villus/_nuxt/8f17df1.js" defer></script><script src="/villus/_nuxt/ab9449b.js" defer></script><script src="/villus/_nuxt/debd94b.js" defer></script><script src="/villus/_nuxt/def7368.js" defer></script>
  </body>
</html>
